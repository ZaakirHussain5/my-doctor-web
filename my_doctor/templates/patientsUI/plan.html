{% extends 'new_patient_layout.html'%}
{% load static%}
{% block content %}
<div class="ca-content__chatstab">

    <div class="ca-content__callstab" style="padding-top: 0;">
        <div class="conversation-panel__body ps">
            <div class="container">
                <div class="card">
                    <div class="card-header">
                        <h4>Select a Plan</h4>
                    </div>
                    <div class="card-body">
                        <section class="customer-logos slider">
                            <!-- Individual -->
                            <div class="slide">
                                <div class="card" style="    border-radius:1.25rem;">
                                    <div class="card-header" style=" border-radius: calc(1.25rem - 1px) calc(1.25rem - 1px) 0 0;">
                                        <h4 class="text-center">Individual</h4>
                                    </div>
                            
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>Coverage</td>
                                                <td>One</td>
                                            </tr>
                                            <tr>
                                                <td>Validity</td>
                                                <td>10 Consults</td>
                                            </tr>
                                            <tr>
                                                <td>Free Video / Audio Consult</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Unlimited Consult / Month</td>
                                                <td>NO</td>
                                            </tr>
                                            <tr>
                                                <td>Lab Discounts</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Free Follow up</td>
                                                <td>2 Free</td>
                                            </tr>
                                            <tr>
                                                <td>Report Storage</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Speciality Choice</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Choice of Doctor</td>
                                                <td>YES</td>
                                            </tr>
                                        </tbody>
                                    </table>
                            
                                    <div class="card-footer">
                                        <div class="text-center">
                                            <div class="card-body text-center">
                                                <h2>
                                                    <i class="mdi mdi-currency-inr"></i>  2,490.00
                                                </h2>
                                            </div>
                                        </div>
                                        <button data-toggle="modal" data-target="#CommingSoon" type="button" class="btn mfb-component__button--main" style="width:100%;  border-radius:30px">
                                            Select Plan
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- You + 1 -->
                            <div class="slide">
                                <div class="card" style="    border-radius:1.25rem;">
                                    <div class="card-header" style=" border-radius: calc(1.25rem - 1px) calc(1.25rem - 1px) 0 0;">
                                        <h4 class="text-center">You + 1</h4>
                                    </div>
                            
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>Coverage</td>
                                                <td>You + 1 Child</td>
                                            </tr>
                                            <tr>
                                                <td>Validity</td>
                                                <td>15 Consults</td>
                                            </tr>
                                            <tr>
                                                <td>Free Video / Audio Consult</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Unlimited Consult / Month</td>
                                                <td>NO</td>
                                            </tr>
                                            <tr>
                                                <td>Lab Discounts</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Free Follow up</td>
                                                <td>2 Free</td>
                                            </tr>
                                            <tr>
                                                <td>Report Storage</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Speciality Choice</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Choice of Doctor</td>
                                                <td>YES</td>
                                            </tr>
                                        </tbody>
                                    </table>
                            
                                    <div class="card-footer">
                                        <div class="text-center">
                                            <div class="card-body text-center">
                                                <h2>
                                                    <i class="mdi mdi-currency-inr"></i> 3,990.00
                                                </h2>
                                            </div>
                                        </div>
                                        <button data-toggle="modal" data-target="#CommingSoon" type="button" class="btn mfb-component__button--main" style="width:100%;  border-radius:30px">
                                            Select Plan
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- You + 2 -->
                            <div class="slide">
                                <div class="card" style="    border-radius:1.25rem;">
                                    <div class="card-header" style=" border-radius: calc(1.25rem - 1px) calc(1.25rem - 1px) 0 0;">
                                        <h4 class="text-center">You + 2</h4>
                                    </div>
                            
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>Coverage</td>
                                                <td>You + 1 Adult + 1 Child</td>
                                            </tr>
                                            <tr>
                                                <td>Validity</td>
                                                <td>15 Consults</td>
                                            </tr>
                                            <tr>
                                                <td>Free Video / Audio Consult</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Unlimited Consult / Month</td>
                                                <td>NO</td>
                                            </tr>
                                            <tr>
                                                <td>Lab Discounts</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Free Follow up</td>
                                                <td>2 Free</td>
                                            </tr>
                                            <tr>
                                                <td>Report Storage</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Speciality Choice</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Choice of Doctor</td>
                                                <td>YES</td>
                                            </tr>
                                        </tbody>
                                    </table>
                            
                                    <div class="card-footer">
                                        <div class="text-center">
                                            <div class="card-body text-center">
                                                <h2>
                                                    <i class="mdi mdi-currency-inr"></i> 4,990.00
                                                </h2>
                                            </div>
                                        </div>
                                        <button data-toggle="modal" data-target="#CommingSoon" type="button" class="btn mfb-component__button--main" style="width:100%;  border-radius:30px">
                                            Select Plan
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- You + 3 -->
                            <div class="slide">
                                <div class="card" style="    border-radius:1.25rem;">
                                    <div class="card-header" style=" border-radius: calc(1.25rem - 1px) calc(1.25rem - 1px) 0 0;">
                                        <h4 class="text-center">You + 3</h4>
                                    </div>
                            
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>Coverage</td>
                                                <td>You + 1 Adult + 2 Child</td>
                                            </tr>
                                            <tr>
                                                <td>Validity</td>
                                                <td>15 Consults</td>
                                            </tr>
                                            <tr>
                                                <td>Free Video / Audio Consult</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Unlimited Consult / Month</td>
                                                <td>NO</td>
                                            </tr>
                                            <tr>
                                                <td>Lab Discounts</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Free Follow up</td>
                                                <td>2 Free</td>
                                            </tr>
                                            <tr>
                                                <td>Report Storage</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Speciality Choice</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Choice of Doctor</td>
                                                <td>YES</td>
                                            </tr>
                                        </tbody>
                                    </table>
                            
                                    <div class="card-footer">
                                        <div class="text-center">
                                            <div class="card-body text-center">
                                                <h2>
                                                    <i class="mdi mdi-currency-inr"></i> 5,990.00
                                                </h2>
                                            </div>
                                        </div>
                                        <button data-toggle="modal" data-target="#CommingSoon" type="button" class="btn mfb-component__button--main" style="width:100%;  border-radius:30px">
                                            Select Plan
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Senior Citizens -->
                            <div class="slide">
                                <div class="card" style="    border-radius:1.25rem;">
                                    <div class="card-header" style=" border-radius: calc(1.25rem - 1px) calc(1.25rem - 1px) 0 0;">
                                        <h4 class="text-center">Senior Citizens</h4>
                                    </div>
                            
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>Coverage</td>
                                                <td>One</td>
                                            </tr>
                                            <tr>
                                                <td>Validity</td>
                                                <td>One Month</td>
                                            </tr>
                                            <tr>
                                                <td>Free Video / Audio Consult</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Unlimited Consult / Month</td>
                                                <td>UNLIMITED</td>
                                            </tr>
                                            <tr>
                                                <td>Lab Discounts</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Free Follow up</td>
                                                <td>4 Free</td>
                                            </tr>
                                            <tr>
                                                <td>Report Storage</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Speciality Choice</td>
                                                <td>YES</td>
                                            </tr>
                                            <tr>
                                                <td>Choice of Doctor</td>
                                                <td>YES</td>
                                            </tr>
                                        </tbody>
                                    </table>
                            
                                    <div class="card-footer">
                                        <div class="text-center">
                                            <div class="card-body text-center">
                                                <h2>
                                                    <i class="mdi mdi-currency-inr"></i> 4,990.00
                                                </h2>
                                            </div>
                                        </div>
                                        <button data-toggle="modal" data-target="#CommingSoon" type="button" class="btn mfb-component__button--main" style="width:100%;  border-radius:30px">
                                            Select Plan
                                        </button>
                                    </div>
                                </div>
                            </div>
                         </section>
                    </div>
                </div>
               
            </div>
    </div>
</div>
<div id="select-subplan" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="heading">One Month Unlimited</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>

            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <ul id="listOfBenefit" class="list-group">
                            <li class="list-group-item text-center font-weight-bold">Benifits</li>
                            <li class="list-group-item">For Individual</li>
                            <li class="list-group-item">Unlimited consultations for 30 Days</li>
                            <li class="list-group-item">Reports Storage</li>
                            <li class="list-group-item">Personlized Experience</li>
                        </ul>
                        <ul class="list-unstyled">
                            <li class="list-group-item text-center font-weight-bold">Subscription Term</li>
                            <li>
                                <div class="ps-list">
                                    <div class="ps-list__left">
                                        <div class="ps-list__left--icon"></div>
                                        <div class="ps-list__left--name">Subscription valid From</div>
                                    </div>
                                    <div class="ps-list__right" id="validFromDate">
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="ps-list">
                                    <div class="ps-list__left">
                                        <div class="ps-list__left--icon"></div>
                                        <div class="ps-list__left--name">Subscription valid Till</div>
                                    </div>
                                    <div class="ps-list__right" id="subscriptionValidTills">18/12/2020
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h6 class="font-weight-bold">Payment Summary</h6>
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li>
                                        <div class="ps-list">
                                            <div class="ps-list__left">
                                                <div class="ps-list__left--icon"></div>
                                                <div class="ps-list__left--name">Subscription Fee</div>
                                            </div>
                                            <div class="ps-list__right" id="subscriptionrice">2500.00
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="ps-list">
                                            <div class="ps-list__left">
                                                <div class="ps-list__left--icon"></div>
                                                <div class="ps-list__left--name">GST</div>
                                            </div>
                                            <div class="ps-list__right" id="subscriptionrice_gst">125.00
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="card">
                                            <div class="card-header">
                                                Total Payable Amount
                                            </div>
                                            <div class="card-body text-center">
                                                <h2>
                                                    <i class="mdi mdi-currency-inr"></i>
                                                    <span id="total-amt">2650.00</span>
                                                </h2>
                                            </div>
                                            <div class="card-footer">
                                                <button type="button" class="btn mfb-component__button--main"
                                                    style="width:100%;  border-radius:30px" id="rzp-button1">
                                                    Pay Now
                                                </button>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<div class="modal new-message-dialog" id="CommingSoon" tabindex="-1" role="dialog" aria-labelledby="newMsgModal"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                       <h5>Comming Soon..</h5>
                          
                    </div>
                    <div class="modal-body text-center">
                      <p class="">This Feature is Unavailable at moment it will be at your service at the earliest.</p>
                    </div>
                    <div class="modal-footer d-flex flex-wrap align-content-center">
                        <button type="button" class="btn mfb-component__button--main"
                        style="width:100%;border-radius:0px" data-dismiss="modal" >ok</button>
                    </div>
                </div>
            </div>
        </div>
{% endblock %}

{% block scripts %}
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    $(document).ready(function () {
        $('#caMainTab a[href="{% url "patients:appointments"%}"]').addClass('active');
        // VARIABLES...
        let dataList = [];
        let old_active_id = null;
        
        document.getElementById('rzp-button1').onclick = function (e) {
            var options = {
                "key": "rzp_test_Sh4geUmypYkfzX", // Enter the Key ID generated from the Dashboard
                "amount": parseFloat($('#total-amt').html()) * 100, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                "currency": "INR",
                "name": "Doctor Plus",
                "description": "Active subscription plane.",
                "image": "{% static 'website/img/logo.png' %}",
                "handler": function (response) {
                    console.log(response)
                    // implement in booking appoinment
                    var payment_id = response.razorpay_payment_id;
                    var data = {
                        plan: plan_id,
                        is_active: true
                    };
                    // '/Authorization Token {value}/appoinments/'
                    $.ajax({
                        'url': '/api/MySubscriptionPlans/',
                        'method': 'POST',
                        'contentType': 'application/json',
                        'data': JSON.stringify(data),
                        beforeSend: function (xhr) {
                            xhr.setRequestHeader("Authorization", "Token " + $.cookie('Token'));
                        },
                    }).done((response) => {
                        console.log(response);
                        alert("Your subscription is activated.")

                    }).fail((err, error, wrong) => {
                        console.log(err)
                    })
                },
                "notes": {
                    "address": "Razorpay Corporate Office"
                },
                "theme": {
                    "color": "#007bff"
                }
            };
            var rzp1 = new Razorpay(options);
            rzp1.open();
            e.preventDefault();
        }

    })
</script>
{% endblock %}