{% extends 'patients_layout.html'%}
{% load static%}
{% block sideContent %}
<style>
    .overlay {
    z-index: 1;
    height: 100%;
    width: 100%;
    position: fixed;
    overflow: auto;
    top: 0px;
    left: 0px;
    background: rgba(0, 0, 0, 0.7); /*can be anything, of course*/
    }
</style>

<div class="tab-content" id="caMainTabContent">
   <div class="tab-pane fade show active" id="caChats" role="tabpanel" aria-labelledby="caChatsTab">
       <div class="home-page" style="height: calc(100vh - 9.6875rem);">
           <div class="container">
               <div id="main-slider" class="owl-carousel owl-theme">
                   <div class="item p-2"><img src="{% static 'patients/assets/images/media/slide1.PNG' %}" style="border-radius: 25px;"
                           alt="The Last of us"></div>
               </div>
               <h5 class="text-lg p-2 pt-4">All Subscription Plans</h5>
               <ul class="list-unstyled" id="subscriptionPlans">
                   <li>
                       <div class="calllist bg-info text-white">
                           <div class="user-avatar user-avatar-rounded">
                               <img src="{% static 'patients/assets/images/user/layer-3.png' %}" alt="">
                           </div>
                           <div class="calllist__details">
                               <div class="calllist__details--name">Family Care Plan</div>
                               
                           </div>

                           <div class="calllist__actions">
                               <div class="iconbox btn-hovered-light">
                                   <i class="iconbox__icon mdi mdi-currency-inr"></i> 1,750
                               </div>
                           </div>
                       </div>
                   </li>
                   <li>
                       <div class="calllist bg-info text-white">
                           <div class="user-avatar user-avatar-rounded online">
                               <img src="{% static 'patients/assets/images/user/250/03.jpg' %}" alt="">
                           </div>
                           <div class="calllist__details">
                               <div class="calllist__details--name">Loyalty Consultation Plan</div>
                               
                           </div>

                           <div class="calllist__actions">
                               <div class="iconbox btn-hovered-light">
                                   <i class="iconbox__icon mdi mdi-currency-inr"></i> 1,500
                               </div>
                           </div>
                       </div>
                   </li>
               </ul>
           </div>
   
       </div>
   </div>
</div>
{% endblock %}
{% block content %} 
<div class="ca-content-wrapper">
                <div class="ca-content">
                    <div class="ca-content__chatstab">
                        <div class="ca-content__callstab">
                        
                        <div class="container">
                            
<div class="row">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-body p-0">
                                            <div class="ca-call-details-card">
                                                <div class="conversation-panel__back-button ">
                                                    <i class="mdi mdi-arrow-left"></i>
                                                </div>
                                                <div class="ca-call-details__left">
                                                    
                                                    <div class="ca-call-details__pname">
                                                        <div>Our Specialities</div>
                                                    </div>                                                    
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-4">
                                <div class="row">
                                    {% for specialist in specialists %}
                                                          <div class="col-md-4 col-xs-4">
                                                              <div class="card">
                                                                  <div class="card-body p-2">
                                                                      <img src="/media/{{specialist.icon}}" alt="" style="width: 100%; height:250px;border-radius: 25%;">
                                                                      
                                                                  </div>
                                                                  <div class="card-footer text-center">
                                                                    <h4>{{specialist.special_type}}</h4>
                                                                  </div>
                                                              </div>
                                                          </div>
                                                          {% endfor %}
                              </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    
                </div>
            </div>
{% endblock %}
{% block scripts %}
<script>
    $(document).ready(function(){
        $('#caMainTab a[href="{% url "patients:dashboard"%}"]').addClass('active')

        // geturl = '/api/getLoggedInPatient/'
        // get a object and need to bind with the profile form
        function getAllSubscriptionPlan(){
            $.ajax({
                url: `/api/subscription_plans`,
                method: 'GET',
                contentType: "application/json"
            }).done((response)=>{
                let liList = '';
                for(let i=0; i < response.length; i++){
                    let li = `
                        <li>
                            <div class="calllist bg-info text-white">
                                <div class="user-avatar user-avatar-rounded">
                                    <!--<img src="{% static 'patients/assets/images/user/layer-3.png' %}" alt="">-->
                                </div>
                                <div class="calllist__details">
                                    <div class="calllist__details--name">${response[i]['plan_name']} for ${response[i]['validity']} days.</div>
                                    
                                </div>

                                <div class="calllist__actions">
                                    <div class="iconbox btn-hovered-light">
                                        <i class="iconbox__icon mdi mdi-currency-inr"></i> ${response[i]['plan_price']}
                                    </div>
                                </div>
                            </div>
                        </li>
                    `;
                    liList += li
                }
                $('#subscriptionPlans').html(liList);
            
            }).fail((err)=>{
                console.log(err);
            })
        }
        getAllSubscriptionPlan()

    })


</script>
{% endblock %}