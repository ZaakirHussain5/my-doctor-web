{%extends 'website_layout.html'%}
{%load static%}
{% block content%}
<style>
    .register .nav-tabs{
    margin-bottom: 3%;
    border: none;
    background: #0b818b;
    border-radius: 1.5rem;
    width: 37%;
}
.register .nav-tabs .nav-link{
    padding-top: 2%;
    padding-bottom: 2%;
    height: 34px;
    font-weight: 600;
    color: #fff;
    border-top-right-radius: 1.5rem;
    border-bottom-right-radius: 1.5rem;
}
.register .nav-tabs .nav-item a:hover{
    border: none;
    color:#0b818b
}
.register .nav-tabs .nav-item.active a{
    width: 100px;
    color: #0b818b;
    border: 2px solid #0b818b;
    border-top-left-radius: 1.5rem;
    border-bottom-left-radius: 1.5rem;
    background-color: #fff;
}
</style>
<section class="breadcrumb">
    <div class="container">
    <div class="breadcrumb-outer">
    <nav aria-label="breadcrumb">
    <ul class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'website:index'%}">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Register</li>
    </ul>
    </nav>
    <h2>Register</h2>
    </div>
    </div>
    </section>
    <section class="login">
    <div class="container">
    <div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
    <div class="login-form">
    <form id="loging_in">
        <div class="row">
            <div class="col-xs-12">
                <div class="form-title">
                    <h2>Register</h2>
                    <p>Enter your details to become a member</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
 <div class="form-group col-xs-12">
                <input id="user_type" type="hidden" value="P">
                <label for="Name1">Full Name</label>
                <input type="text" required class="form-control" id="Name1" placeholder="Enter your full name">
            </div>
            <div class="form-group col-xs-12">
                
                <label for="mob1">Phone Number</label>
                <input type="text" class="form-control"  required id="mob1" placeholder="Enter registered phone number">
            </div>
            <div class="form-group col-xs-12">
                <label for="email">Email Address</label>
                <input type="text" required class="form-control" id="email" placeholder="Enter your email">
            </div>
            <div class="form-group col-xs-12">
            <label for="password">Password</label>
                <input type="password" class="form-control" id="password" required placeholder="Enter password">
            </div>
            <div class="form-group col-xs-12">
                <label for="age">Age</label>
                <input type="number" class="form-control" required id="age" placeholder="Enter Age">
            </div>
          
                </div>
                <div class="col-md-6">
              <div class="form-group col-xs-12">
                <label for="gender">Gender</label>
                <select name="" id="gender" required>
                    <option value="">Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>   
            </div>
            <div class="form-group col-xs-12">
                <label for="bloodGroup">Blood Group</label>
                <select name="" id="bloodGroup">
                    <option value="">Select Blood Group</option>
                    <option value="A+">A+</option>
                    <option value="B+">B+</option>
                    <option value="AB+">AB+</option>
                    <option value="O+">O+</option>
                    <option value="A-">A-</option>
                    <option value="B-">B-</option>
                    <option value="AB-">AB-</option>
                    <option value="O-">O-</option>
                </select>   
            </div>
            <div class="form-group col-xs-12">
                <label for="height">Height</label>
                <input type="number" class="form-control" id="height" placeholder="Enter Height">
            </div>
            <div class="form-group col-xs-12">
                <label for="weight">Weight</label>
                <input type="number" class="form-control" id="weight" placeholder="Enter Weight">
            </div>

            <div class="col-xs-12">
                <div class="comment-btn">
                    <button type="submit" id="submit" class="btn pull-right">Signup</button>
                </div>
            </div>
                </div>
            </div>
           
           
            
        </div>
    </form>
    </div>
    </div>
    
    </div>
    </div>
    </section>
    
    <section class="newsletter">
      <div class="container">
      <div class="newsletter-content">
      <div class="subscribe-form">
      <div class="row">
      <div class="col-md-6 col-sm-12">
      <h3 class="white">Subscribe to newsletter</h3>
      <p class="white">Enter your mail ID for latest updates, new promotions and offers</p>
      </div>
      <div class="col-md-6 col-sm-12">
      <form>
      <input type="email" placeholder="abc@xyz.com">
      <a href="#">Subscribe</a>
      </form>
      </div>
      </div>
      </div>
      </div>
      </div>
      </section>
{%endblock%}
{% block scripts %}
    <script>
        jQuery(document).ready(function($){
            $('#myTab li:first-child').click(()=>{
                console.log('clicked');
                $('#user_type').val('P')
                $('label[for="Name1"]').html('Phone Number')
                $('#Name1').attr('placeholder','Enter registered phone number')
                $('#myTab #Doctor').removeClass('active')
                $('#myTab #Patient').addClass('active')
                return false
            })

            $('#myTab:nth-child(2)').click(()=>{
                console.log('clicked');
                $('#user_type').val('D');
                $('label[for="Name1"]').html('Doctor ID')
                $('#Name1').attr('placeholder','Enter Doctor ID')
                $('#myTab #Patient').removeClass('active')
                $('#myTab #Doctor').addClass('active')
                return false
            })

            function submitForm(){
                let data = {
                    full_name: $('#Name1').val(),
                    user_type: $('#user_type').val(),
                    username: $('#mob1').val(),
                    ph_no: $('#mob1').val(),
                    email: $('#email').val(),
                    password: $('#password').val(),
                    age: $("#age").val(),
                    gender: $("#gender").val(),
                    blood_group: $("#bloodGroup").val(),
                    height: $("#height").val(),
                    weight: $("#weight").val(),
                    marital_status: 'Not Specified'
                }
                $.ajax({
                    url: '/api/GeneratePatientID',
                    method: 'GET',
                    contentType: 'application/json',
                }).done((response)=>{
                        data.pat_id = response.pat_id
                        $.ajax({
                        url: '/api/PatientRegInApp',
                        data: JSON.stringify(data),
                        method: 'POST',
                        contentType: 'application/json'
                    }).done((response)=>{
                        $.cookie('Token', response.token, { expires: 1 })
                        window.location.href = 'patients/dashboard'
                    }).fail((error)=>{
                        console.log(error);

                    })
                }).fail((error)=>{
                    console.log(error)

                })


            }

        $('#submit').click(submitForm)

        })



    </script>
{% endblock %}